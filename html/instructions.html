<html>
    <head>
        <link rel="stylesheet" href="css/consent.css">
        <script src="js/instructions.js" type="module"></script>
        <script>
            console.log('📄 Instructions.html loaded - Version: Phase 0 Only (No Progress Dots) - ' + new Date().toISOString());
        </script>
        <style>
            .instruction-phase {
                display: none;
            }
            .instruction-phase.active {
                display: block;
            }
            .progress-indicator {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
                margin: 20px 0;
            }
            .progress-dot {
                width: 12px;
                height: 12px;
                border-radius: 50%;
                background-color: #ccc;
                transition: all 0.3s ease;
            }
            .progress-dot.active {
                background-color: #2196F3;
                transform: scale(1.3);
            }
            .progress-dot.completed {
                background-color: #4caf50;
            }
            .phase-navigation {
                display: flex;
                gap: 10px;
                justify-content: space-between;
                margin-top: 20px;
            }
        </style>
    </head>
    <body>
        <div class="col-12 trialbox">
            <!-- Header (hidden - using only Phase 0 content) -->
            <div class="row" style="display: none;">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <!-- <div class="block-text">
                        <h3><b>Study Instructions</b></h3>
                        <p>Thank you for participating in this study! Please read through each section carefully.</p>
                    </div> -->
                </div>
                <div class="col-md-2"></div>
            </div>

            <!-- Progress Indicator removed - only showing Phase 0 overview -->

            <!-- Instruction Phases Container -->
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <div id="instruction-phases-container">
                        
                        <!-- Phase 0: Study Overview -->
                        <div class="instruction-phase active" data-phase="0">
                            <div class="highlight">
                                <h4><b>Study Overview</b></h4>
                                <p>
                                    In this study, you will create a customized AI chatbot by writing a <b>system prompt</b>. 
                                    A system prompt is a set of instructions that defines how the AI should behave, what personality 
                                    it should have, and how it should interact with users.
                                </p>
                                <p>
                                    After creating your prompt, you'll answer some questions about your expectations, and then 
                                    you'll have the opportunity to chat with the AI assistant you've created.
                                </p>
                                
                                <div style="background-color: #f0f8ff; padding: 15px; border-left: 4px solid #2196F3; margin: 15px 0;">
                                    <p style="margin: 0;"><b>📋 What to expect:</b></p>
                                    <ul style="margin-bottom: 0;">
                                        <li>Choose an avatar character for your AI assistant</li>
                                        <li>Write a system prompt for your AI</li>
                                        <li>Complete a brief survey about your expectations</li>
                                        <li>Chat with your customized AI assistant</li>
                                        <li>Provide feedback on your experience</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Phase 1: Avatar Selection (hidden - kept for future use) -->
                        <div class="instruction-phase" data-phase="1" style="display: none;">
                            <div class="highlight">
                                <h4><b>Part 1: Avatar Selection</b></h4>
                                <p>
                                    Before configuring your AI assistant, you'll choose an avatar character that will represent your AI throughout the chat.
                                </p>
                                
                                <h5><b>How to Select an Avatar</b></h5>
                                <ol>
                                    <li><b>Browse the options:</b> You'll see a grid of 12 different avatar characters</li>
                                    <li><b>Click to select:</b> Choose the one that you feel best represents your AI assistant</li>
                                    <li><b>Confirm your choice:</b> Click "Continue with Selected Avatar" to proceed</li>
                                </ol>

                                <div style="background-color: #f0f8ff; padding: 15px; border-left: 4px solid #2196F3; margin: 15px 0;">
                                    <p style="margin: 0;"><b>💡 Tip:</b> Your selected avatar will appear in all messages from the AI assistant during your conversation!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Phase 2: System Prompt Configuration (hidden - kept for future use) -->
                        <div class="instruction-phase" data-phase="2" style="display: none;">
                            <div class="highlight">
                                <h4><b>Part 2: System Prompt Configuration</b></h4>
                                <p>
                                    You'll start by seeing a <b>System Prompt Editor</b> where you can write instructions for your AI assistant.
                                </p>
                                
                                <h5><b>What is a System Prompt?</b></h5>
                                <p>
                                    A system prompt is like giving instructions to the AI about how to act. For example:
                                </p>
                                <ul>
                                    <li>"You are a helpful and friendly assistant who loves to joke around"</li>
                                    <li>"You are a professional research assistant who is formal and concise"</li>
                                    <li>"You are an enthusiastic teacher who uses lots of examples"</li>
                                </ul>
                                
                                <h5><b>How to Write Your System Prompt</b></h5>
                                <ol>
                                    <li><b>Think about the personality</b> you want the AI to have</li>
                                    <li><b>Consider the tone:</b> Should it be formal? Casual? Friendly? Professional?</li>
                                    <li><b>Define behaviors:</b> Should it be empathetic? Humorous? Direct?</li>
                                    <li><b>Write your instructions</b> in the text area provided</li>
                                    <li><b>Click "Submit Prompt"</b> when you're ready to continue</li>
                                </ol>

                                <div style="background-color: #f0f8ff; padding: 15px; border-left: 4px solid #2196F3; margin: 15px 0;">
                                    <p style="margin: 0;"><b>💡 Tip:</b> Be specific! The more detailed your instructions, the more the AI will reflect your intended personality.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Phase 3: Assessment Survey (hidden - kept for future use) -->
                        <div class="instruction-phase" data-phase="3" style="display: none;">
                            <div class="highlight">
                                <h4><b>Part 3: Assessment Survey</b></h4>
                                <p>
                                    After submitting your system prompt, you'll be asked to answer questions about your expectations. 
                                    This will appear in the right panel automatically.
                                </p>
                                
                                <h5><b>Survey Phases</b></h5>
                                <p>You'll complete three short phases:</p>
                                <ul>
                                    <li><b>Phase 1:</b> Initial questions about predictability of AI behaviors</li>
                                    <li><b>Phase 2:</b> Predict how strongly certain personality traits will appear (0-10 scale)</li>
                                    <li><b>Phase 3:</b> Rate your trust in the AI model</li>
                                </ul>

                                <h5><b>Personality Traits</b></h5>
                                <p>In Phase 2, you'll rate traits like:</p>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
                                    <div><b>Positive Traits:</b> Empathy, Sociality, Supportiveness, Humor, Warmth</div>
                                    <div><b>Negative Traits:</b> Toxicity, Sycophancy, Deceptiveness, Hallucination</div>
                                </div>

                                <div style="background-color: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin: 15px 0;">
                                    <p style="margin: 0;"><b>⚠️ Note:</b> Answer honestly based on what you think your system prompt will produce. There are no right or wrong answers!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Phase 4: Persona Visualization (hidden - kept for future use) -->
                        <div class="instruction-phase" data-phase="4" style="display: none;">
                            <div class="highlight">
                                <h4><b>Part 4: Persona Visualization</b></h4>
                                <p>
                                    After completing the survey, you'll see a <b>Persona Analysis</b> visualization showing 
                                    the personality profile you predicted for your AI assistant. This will appear as a sunburst chart 
                                    in the right panel.
                                </p>
                                <p>
                                    The visualization shows:
                                </p>
                                <ul>
                                    <li>The relative strength of different personality traits</li>
                                    <li>How positive and negative traits balance</li>
                                    <li>An overall personality profile for your AI</li>
                                </ul>
                                <p>
                                    When you're ready, click <b>"Start Chat"</b> to begin interacting with your customized AI.
                                </p>

                                <div style="background-color: #e8f5e9; padding: 15px; border-left: 4px solid #4caf50; margin: 15px 0;">
                                    <p style="margin: 0;"><b>✓ Remember:</b> The visualization shows YOUR predictions, not the AI's actual behavior. You'll discover how accurate you were during the chat!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Phase 5: Chat Interface (hidden - kept for future use) -->
                        <div class="instruction-phase" data-phase="5" style="display: none;">
                            <div class="highlight">
                                <h4><b>Part 5: Chat Interface</b></h4>
                                <p>
                                    Once you start the chat, you'll see a standard messaging interface similar to ChatGPT or other 
                                    chat applications.
                                </p>
                                
                                <h5><b>Chat Interface Features</b></h5>
                                <ul>
                                    <li><b>Message Area:</b> Your conversation history will appear here</li>
                                    <li><b>Input Box:</b> Type your messages at the bottom</li>
                                    <li><b>Send Button:</b> Click to send (or press Enter)</li>
                                    <li><b>Timer:</b> A timer will track your interaction time</li>
                                    <li><b>Back to Configuration:</b> You can return to edit your system prompt if needed</li>
                                </ul>

                                <h5><b>Tips for Chatting</b></h5>
                                <ul>
                                    <li>Ask questions naturally as you would with any AI assistant</li>
                                    <li>Pay attention to how the AI's personality matches your system prompt</li>
                                    <li>Try different types of questions to explore the AI's behavior</li>
                                    <li>Press <kbd>Enter</kbd> to send messages, or <kbd>Shift+Enter</kbd> for new lines</li>
                                </ul>

                                <div style="background-color: #e8f5e9; padding: 15px; border-left: 4px solid #4caf50; margin: 15px 0;">
                                    <p style="margin: 0;"><b>✓ Remember:</b> Chat naturally and observe whether the AI behaves as you expected based on your system prompt!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Phase 6: Post-Interaction Survey & Reminders (hidden - kept for future use) -->
                        <div class="instruction-phase" data-phase="6" style="display: none;">
                            <div class="highlight">
                                <h4><b>Part 6: Post-Interaction Survey</b></h4>
                                <p>
                                    After you've finished chatting (when the timer completes), you'll see a final survey asking about 
                                    your experience. This includes:
                                </p>
                                <ul>
                                    <li>Questions about how well you could predict the AI's behaviors</li>
                                    <li>Your trust level in the chatbot you created</li>
                                    <li>Open-ended feedback about your experience</li>
                                </ul>

                                <hr />

                                <h4><b>Important Reminders</b></h4>
                                <div style="background-color: #ffebee; padding: 15px; border-left: 4px solid #f44336; margin: 15px 0;">
                                    <ul style="margin-bottom: 0;">
                                        <li>Be thoughtful when creating your system prompt</li>
                                        <li>Answer all survey questions honestly</li>
                                        <li>Interact with the chatbot naturally during the conversation</li>
                                        <li>Complete the entire study to receive compensation</li>
                                        <li>Do not close your browser or navigate away - progress will be lost</li>
                                    </ul>
                                </div>

                                <hr />

                                <h4><b>Questions or Issues?</b></h4>
                                <p>
                                    If you experience any technical difficulties or have questions about the study, 
                                    please contact the research team at <a href="mailto:skarny@media.mit.edu">skarny@media.mit.edu</a>.
                                </p>
                            </div>
                        </div>

                    </div>

                    <!-- Navigation Buttons -->
                    <div class="phase-navigation" style="justify-content: center;">
                        <button class="btn btn-primary btn-lg" id="next-phase-btn" style="flex: 1; max-width: 400px;">
                            I Understand - Start Study →
                        </button>
                        <button class="btn btn-primary" id="proceed-to-task" style="flex: 1; max-width: 400px; display: none;">
                            I Understand - Start Study →
                        </button>
                    </div>
                </div>
                <div class="col-md-2"></div>
            </div>
        </div>
    </body>
</html>